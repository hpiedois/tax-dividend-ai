# ============================================================================
# PRODUCTION ENVIRONMENT TEMPLATE - Tax Dividend AI
# ============================================================================
# ⚠️  CRITICAL SECURITY NOTES:
# 1. NEVER commit this file with real credentials to git
# 2. Copy to .env.prod and use strong, unique passwords
# 3. Use a secrets management system (Vault, AWS Secrets Manager, etc.)
# 4. Rotate credentials regularly
# 5. Enable SSL/TLS for all connections
# 6. Use managed services when possible (RDS, Cloud SQL, etc.)
# ============================================================================
# Usage: cp .env.prod.example .env.prod && edit .env.prod
# ============================================================================

# ----------------------------------------------------------------------------
# PostgreSQL - Production
# ----------------------------------------------------------------------------
POSTGRES_DB=taxdividend
POSTGRES_USER=postgres
# ⚠️  REQUIRED: Use a strong random password (min 32 chars, alphanumeric + symbols)
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_MIN_32_CHARS

# Application user credentials
TAXDIVIDEND_DB_USER=taxdividend_user
# ⚠️  REQUIRED: Different password from POSTGRES_PASSWORD
TAXDIVIDEND_DB_PASSWORD=CHANGE_ME_DIFFERENT_STRONG_PASSWORD

# Performance settings (adjust based on server resources)
# Recommendations for 4GB RAM server:
POSTGRES_SHARED_BUFFERS=1GB
POSTGRES_EFFECTIVE_CACHE_SIZE=3GB
POSTGRES_MAX_CONNECTIONS=200
POSTGRES_WORK_MEM=8MB
POSTGRES_MAINTENANCE_WORK_MEM=256MB
POSTGRES_WAL_BUFFERS=16MB
POSTGRES_CHECKPOINT_COMPLETION_TARGET=0.9
POSTGRES_RANDOM_PAGE_COST=1.1
POSTGRES_EFFECTIVE_IO_CONCURRENCY=200

# Port (localhost binding only!)
POSTGRES_PORT=5432

# ----------------------------------------------------------------------------
# MinIO - Production
# ----------------------------------------------------------------------------
# ⚠️  REQUIRED: Use strong credentials
MINIO_ROOT_USER=CHANGE_ME_MINIO_USER
MINIO_ROOT_PASSWORD=CHANGE_ME_MINIO_PASSWORD_MIN_32_CHARS
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
# Disable browser UI in production
MINIO_BROWSER=off

# ----------------------------------------------------------------------------
# Redis - Production
# ----------------------------------------------------------------------------
REDIS_PORT=6379
# ⚠️  REQUIRED: Use a strong password for Redis
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD_MIN_32_CHARS

# ----------------------------------------------------------------------------
# Backup & Monitoring
# ----------------------------------------------------------------------------
# Backup schedule (cron format)
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# Monitoring endpoints (if using Prometheus/Grafana)
# PROMETHEUS_PORT=9090
# GRAFANA_PORT=3000

# GRAFANA_PORT=3000

# ----------------------------------------------------------------------------
# Backend Security
# ----------------------------------------------------------------------------
# ⚠️  REQUIRED: Secret key for internal communication (BFF -> Backend)
INTERNAL_API_KEY=CHANGE_ME_INTERNAL_API_KEY_MIN_32_CHARS_SECURE

# ----------------------------------------------------------------------------
# Observability Configuration (OpenTelemetry)
# ----------------------------------------------------------------------------
# Endpoint for OTLP traces (e.g., Tempo, Jaeger, Honeycomb)
OTEL_EXPORTER_OTLP_ENDPOINT=http://tempo:4317
# Sampling probability (0.1 = 10% of traces in production)
OTEL_TRACES_SAMPLER_PROBABILITY=0.1

# ----------------------------------------------------------------------------
# SSL/TLS Configuration
# ----------------------------------------------------------------------------
# SSL_CERT_PATH=/etc/ssl/certs/taxdividend.crt
# SSL_KEY_PATH=/etc/ssl/private/taxdividend.key
# SSL_CA_PATH=/etc/ssl/certs/ca-bundle.crt

# ----------------------------------------------------------------------------
# Production Checklist
# ----------------------------------------------------------------------------
# ✅ Changed all default passwords
# ✅ Using managed database service (RDS/Cloud SQL) instead of Docker
# ✅ Using managed object storage (S3/Cloud Storage) instead of MinIO
# ✅ Enabled SSL/TLS for all connections
# ✅ Configured backups and tested restore
# ✅ Set up monitoring and alerting
# ✅ Configured firewall rules
# ✅ Enabled audit logging
# ✅ Implemented disaster recovery plan
# ✅ Using secrets management system
# ✅ Configured auto-scaling if needed
