openapi: 3.0.3
info:
  title: Tax Dividend AI BFF API
  version: 1.0.0
  description: Backend for Frontend API for Tax Dividend AI
servers:
  - url: http://localhost:8080/api
    description: Local development server

paths:
  # Auth
  /auth/register:
    $ref: './paths/auth.yaml#/~1auth~1register'
  /auth/verify:
    $ref: './paths/auth.yaml#/~1auth~1verify'

  # Dividends
  /dividends/parse-statement:
    $ref: './paths/dividends.yaml#/~1dividends~1parse-statement'
  /dividends/history:
    $ref: './paths/dividends.yaml#/~1dividends~1history'
  /dividends/stats:
    $ref: './paths/dividends.yaml#/~1dividends~1stats'
  /dividends/status:
    $ref: './paths/dividends.yaml#/~1dividends~1status'

  # Forms
  /forms/generate:
    $ref: './paths/forms.yaml#/~1forms~1generate'
  /forms:
    $ref: './paths/forms.yaml#/~1forms'
  /forms/{id}:
    $ref: './paths/forms.yaml#/~1forms~1{id}'
  /forms/{id}/download:
    $ref: './paths/forms.yaml#/~1forms~1{id}~1download'
  /forms/{id}/download-url:
    $ref: './paths/forms.yaml#/~1forms~1{id}~1download-url'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    # Auth
    RegisterRequest:
      $ref: './schemas/auth.yaml#/RegisterRequest'

    # Dividends
    Dividend:
      $ref: './schemas/dividends.yaml#/Dividend'
    DividendStatement:
      $ref: './schemas/dividends.yaml#/DividendStatement'
    DividendCase:
      $ref: './schemas/dividends.yaml#/DividendCase'
    DividendHistoryResponse:
      $ref: './schemas/dividends.yaml#/DividendHistoryResponse'
    DividendStats:
      $ref: './schemas/dividends.yaml#/DividendStats'
    UpdateDividendStatusRequest:
      $ref: './schemas/dividends.yaml#/UpdateDividendStatusRequest'

    # Forms
    GeneratedForm:
      $ref: './schemas/forms.yaml#/GeneratedForm'
    FormDownloadUrlResponse:
      $ref: './schemas/forms.yaml#/FormDownloadUrlResponse'
    GenerateTaxFormsRequest:
      $ref: './schemas/forms.yaml#/GenerateTaxFormsRequest'
    GenerateTaxFormsResponse:
      $ref: './schemas/forms.yaml#/GenerateTaxFormsResponse'

security:
  - bearerAuth: []
