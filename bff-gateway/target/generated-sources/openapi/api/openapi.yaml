openapi: 3.0.3
info:
  description: API for extracting data from dividend statements
  title: Dividend Agent API
  version: 1.0.0
servers:
- url: http://localhost:8083/api
paths:
  /parse:
    post:
      operationId: parseDocument
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/parseDocument_request"
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ParseResponse"
          description: Successful extraction
        "400":
          description: Invalid input or unreadable file
        "422":
          description: Password required but not provided
        "500":
          description: Extraction failed
      summary: Parse a PDF or Image dividend statement
      tags:
      - Parsing
      x-content-type: multipart/form-data
      x-accepts:
      - application/json
components:
  schemas:
    ParseResponse:
      example:
        data:
        - country: country
          securityName: securityName
          reclaimableAmount: 1.4658129805029452
          withholdingTax: 6.027456183070403
          currency: currency
          grossAmount: 0.8008281904610115
          paymentDate: 2000-01-23
          isin: isin
        - country: country
          securityName: securityName
          reclaimableAmount: 1.4658129805029452
          withholdingTax: 6.027456183070403
          currency: currency
          grossAmount: 0.8008281904610115
          paymentDate: 2000-01-23
          isin: isin
      properties:
        data:
          items:
            $ref: "#/components/schemas/DividendData"
          type: array
      type: object
    DividendData:
      example:
        country: country
        securityName: securityName
        reclaimableAmount: 1.4658129805029452
        withholdingTax: 6.027456183070403
        currency: currency
        grossAmount: 0.8008281904610115
        paymentDate: 2000-01-23
        isin: isin
      properties:
        securityName:
          type: string
        isin:
          type: string
        grossAmount:
          type: number
        currency:
          type: string
        paymentDate:
          format: date
          type: string
        country:
          type: string
        withholdingTax:
          type: number
        reclaimableAmount:
          type: number
      type: object
    parseDocument_request:
      properties:
        file:
          description: "The dividend statement file (PDF, JPEG, PNG)"
          format: binary
          type: string
        password:
          description: Optional password for encrypted PDFs
          type: string
      required:
      - file
      type: object

